# ============================================
# ArtinSmartRealty V2 - Environment Configuration
# ============================================
# Copy this file to .env and fill in your values
# IMPORTANT: Never commit .env to version control!

# ============================================
# DATABASE
# ============================================
# PostgreSQL database password
# Generate a strong password: openssl rand -base64 32
DB_PASSWORD=change_me_to_a_secure_password

# Database connection string (optional, defaults to Docker setup)
# DATABASE_URL=postgresql+asyncpg://postgres:${DB_PASSWORD}@localhost:5432/artinrealty

# ============================================
# AI / GEMINI
# ============================================
# Google Gemini API Key
# Get yours at: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_gemini_api_key_here

# ============================================
# APPLICATION
# ============================================
# Debug mode (set to false in production)
DEBUG=false

# Backend port
PORT=8000

# ============================================
# SECURITY
# ============================================
# JWT Secret for token signing (REQUIRED)
# Generate: openssl rand -base64 64
JWT_SECRET=generate_a_secure_random_string_here_at_least_64_characters

# Password salt for hashing (REQUIRED)
# Generate: openssl rand -base64 32
PASSWORD_SALT=generate_a_secure_random_salt_here

# Token expiry in hours
JWT_EXPIRY_HOURS=24

# ============================================
# CORS
# ============================================
# Comma-separated list of allowed origins
# For production, use your actual domain only
CORS_ORIGINS=http://localhost:3000,http://localhost:80

# ============================================
# SUPER ADMIN (Platform Owner)
# ============================================
# ⚠️ CRITICAL: Change these credentials for production!
SUPER_ADMIN_EMAIL=admin@artinsmartrealty.com
SUPER_ADMIN_PASSWORD=SuperAdmin123!

# ============================================
# WHATSAPP CONFIGURATION
# ============================================

# === Option 1: WAHA (Self-Hosted - RECOMMENDED) ===
# Free, unlimited messages, no Meta approval needed
# Just scan QR code and you're ready!

WAHA_ENABLED=true
WAHA_API_URL=http://waha:3000/api
WAHA_SESSION=default

# WhatsApp Router Settings (for multi-service routing)
REALTY_WEBHOOK=http://backend:8000/api/webhook/waha
TRAVEL_WEBHOOK=https://travel.artinsmartagent.com/api/webhook/waha
EXPO_WEBHOOK=https://expo.artinsmartagent.com/api/webhook/waha
CLINIC_WEBHOOK=https://clinic.artinsmartagent.com/api/webhook/waha

# === Option 2: Meta WhatsApp Business API ===
# (Only if you don't use Waha - requires Meta approval)
# Get these from Meta Business Manager: https://business.facebook.com/

# ⚠️ IMPORTANT: There are TWO different WhatsApp tokens!

# 1. VERIFY TOKEN (For webhook registration - set this in .env)
#    - Used ONLY when Meta registers your webhook endpoint
#    - Simple URL-safe string (no special characters like +, /, =)
#    - Example: ArtinSmartRealty2024SecureWebhookToken9876543210
WHATSAPP_VERIFY_TOKEN=ArtinSmartRealty2024SecureWebhookToken9876543210

# 2. ACCESS TOKEN (For API calls - stored in DATABASE, NOT in .env)
#    - Long token starting with "EAAT..."
#    - ~200 characters long
#    - Stored in database: tenants.whatsapp_access_token
#    - ❌ DO NOT put this in .env file!

# Note: Individual tenant WhatsApp credentials are stored in the database:
# - whatsapp_phone_number_id (from Meta Business Manager)
# - whatsapp_access_token (starts with EAAT... ~200 chars)
# - whatsapp_business_account_id (numeric ID)
# - whatsapp_verify_token (optional per-tenant override)

# === Option 3: Twilio WhatsApp (Alternative) ===
# TWILIO_ACCOUNT_SID=your_account_sid
# TWILIO_AUTH_TOKEN=your_auth_token
# TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# ============================================
# FILE STORAGE
# ============================================
# Directory for generated PDFs
PDF_OUTPUT_DIR=/tmp/roi_reports

# ============================================
# PRODUCTION CHECKLIST
# ============================================
# Before deploying to production:
# [ ] Changed DB_PASSWORD to a strong password
# [ ] Set GEMINI_API_KEY
# [ ] Generated unique JWT_SECRET (64+ chars)
# [ ] Generated unique PASSWORD_SALT (32+ chars)
# [ ] Changed SUPER_ADMIN_PASSWORD
# [ ] Updated CORS_ORIGINS to your domain
# [ ] Set DEBUG=false
# [ ] Configured SSL/HTTPS in nginx

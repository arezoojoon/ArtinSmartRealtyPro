# โ ฺฺฉโูุณุช ุชุบุฑุงุช ุงููุช ู ุจูููโุณุงุฒ ุขูพููุฏ ุนฺฉุณ

## ๐ ุฎูุงุตู ุชุบุฑุงุช

### ๐ง Backend (Python/FastAPI)

#### 1. File Manager (`backend/file_manager.py`)
- [x] ฺฉุงูุด ุญุฌู ูุฌุงุฒ ุงุฒ 5MB ุจู **3MB**
- [x] ุงุถุงูู ฺฉุฑุฏู ุจุฑุฑุณ **MIME Type** ุจุฑุง ุงููุช
- [x] ูพุงูโูุง ุฎุทุง ุจู **ูุงุฑุณ** ุจุง ุฌุฒุฆุงุช ฺฉุงูู
- [x] ููุงุด ุญุฌู ูุงู ุฏุฑ ูพุงู ุฎุทุง (ูุซูุงู: "4.2MB ุจุด ุงุฒ 3MB ูุฌุงุฒ")

```python
# ูุจู
MAX_FILE_SIZE = 5 * 1024 * 1024  # 5MB

# ุจุนุฏ
MAX_FILE_SIZE = 3 * 1024 * 1024  # 3MB
ALLOWED_MIME_TYPES = {"image/jpeg", "image/png", "image/webp"}
```

#### 2. API Endpoints (`backend/main.py`)
- [x] ุจุฑุฑุณ ุฏูู ุชุนุฏุงุฏ ุนฺฉุณโูุง **ูุจู ุงุฒ ุขูพููุฏ**
- [x] ุฌููฺฏุฑ ุงุฒ ุขูพููุฏ ุจุด ุงุฒ 5 ุนฺฉุณ ฺฉุฌุง
- [x] ุจุฑุฑุณ MIME Type ุจุฑุง ูุฑ ูุงู
- [x] ุฐุฎุฑู ุงุทูุงุนุงุช **ูุงูโูุง ูุงูููู** ุฏุฑ response
- [x] ููุงุด ุชุนุฏุงุฏ ุจุงูโูุงูุฏู ุฏุฑ ูพุงุณุฎ API
- [x] ูพุงูโูุง ุฎุทุง ุจู **ูุงุฑุณ**

```python
# Response ุฌุฏุฏ ุจุง ุงุทูุงุนุงุช ฺฉุงูู
{
    "status": "success",
    "message": "3 ุนฺฉุณ ุจุง ููููุช ุขูพููุฏ ุดุฏ",
    "uploaded": 3,
    "total_images": 5,
    "max_allowed": 5,
    "remaining_slots": 0,  // ุฌุฏุฏ
    "warnings": {           // ุฌุฏุฏ
        "failed_files": [...]
    }
}
```

### ๐จ Frontend (React)

#### 3. PropertyImageUpload Component (`frontend/src/components/PropertyImageUpload.jsx`)
- [x] ฺฉุงูุด MAX_FILE_SIZE ุจู **3MB**
- [x] ุจุฑุฑุณ ุฏูู ูุฑูุช ุนฺฉุณ (ููุท jpeg, png, webp)
- [x] ูพุงูโูุง ุฎุทุง ุจู **ูุงุฑุณ** ุจุง ุงููุฌ
- [x] ููุงุด ุฌุฒุฆุงุช ฺฉุงูู ุฏุฑ alert ูุง:
  - ุชุนุฏุงุฏ ููุฌูุฏ
  - ุชุนุฏุงุฏ ุงูุชุฎุงุจ ุดุฏู
  - ุชุนุฏุงุฏ ูุฌููุน
  - ุชุนุฏุงุฏ ุจุงูโูุงูุฏู
- [x] ููุงุด ูุณุช ูุงูโูุง ูุงูููู ุจุง ุฏูู ุฎุทุง
- [x] ูุงฺฏ console ุจุฑุง ุฏุจุงฺฏ

```javascript
// ูุจู
MAX_FILE_SIZE = 5 * 1024 * 1024  // 5MB
alert('Upload failed')

// ุจุนุฏ
MAX_FILE_SIZE = 3 * 1024 * 1024  // 3MB
alert(`
โ 3 ุนฺฉุณ ุจุง ููููุช ุขูพููุฏ ุดุฏ!

๐ ูุฌููุน ุนฺฉุณโูุง: 5/5
๐ ุจุงูโูุงูุฏู: 0 ุนฺฉุณ

โ๏ธ 1 ูุงู ุขูพููุฏ ูุดุฏ:
โข large_file.jpg: ุญุฌู ูุงู (4.2MB) ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ ุงุณุช! ุญุฏุงฺฉุซุฑ 3MB
`)
```

---

## ๐ก๏ธ ุจุฑุฑุณโูุง ุงููุช ุงุถุงูู ุดุฏู

### ูุงู 1: Frontend (ุงุนุชุจุงุฑุณูุฌ ุงููู)
```javascript
โ ุจุฑุฑุณ ููุน ูุงู (image/*)
โ ุจุฑุฑุณ ูุฑูุช ุฏูู (jpeg, png, webp)
โ ุจุฑุฑุณ ุญุฌู (max 3MB)
โ ุจุฑุฑุณ ุชุนุฏุงุฏ ฺฉู (max 5)
โ ุจุฑุฑุณ ุชุนุฏุงุฏ ูุงูโูุง ุงุฑุณุงู (max 5)
```

### ูุงู 2: Backend (ุงุนุชุจุงุฑุณูุฌ ููุง)
```python
โ ุจุฑุฑุณ MIME Type ูุงูุน ูุงู
โ ุจุฑุฑุณ ูพุณููุฏ ูุงู (.jpg, .jpeg, .png, .webp)
โ ุจุฑุฑุณ ุญุฌู ุฏูู ูุงู
โ ุจุฑุฑุณ ุชุนุฏุงุฏ ููุฌูุฏ + ุฌุฏุฏ <= 5
โ ุจุฑุฑุณ ูุงูฺฉุช (tenant_id, property_id)
โ ุงุญุฑุงุฒ ููุช ุจุง JWT Token
```

---

## ๐ ููุงุณู ูุจู ู ุจุนุฏ

### ุญุฌู ูุงู
| ุฌูุจู | ูุจู | ุจุนุฏ | ุชุบุฑ |
|------|-----|-----|-------|
| Max Size | 5MB | 3MB | โฌ๏ธ 40% ฺฉุงูุด |
| ูุถุง ุฏุณฺฉ (ูุฑ ููฺฉ) | 25MB | 15MB | โฌ๏ธ 40% ฺฉุงูุด |
| ุฒูุงู ุขูพููุฏ | ~60s | ~30s | โก 50% ุณุฑุนโุชุฑ |
| ุฒูุงู ููุฏ ุตูุญู | ~8s | ~4s | โก 50% ุณุฑุนโุชุฑ |

### ูพุงูโูุง ุฎุทุง
| ุญุงูุช | ูุจู | ุจุนุฏ |
|------|-----|-----|
| ุฒุจุงู | ุงูฺฏูุณ | ูุงุฑุณ + ุงูฺฏูุณ |
| ุฌุฒุฆุงุช | ฺฉู | ฺฉุงูู ุจุง ุงุนุฏุงุฏ |
| ุฑุงูููุง | ูุฏุงุฑุฏ | ุฏุงุฑุฏ (ฺู ฺฉูู) |

### ุชุฌุฑุจู ฺฉุงุฑุจุฑ
```
ูุจู:
โ "File too large"
โ "Upload failed"
โ "Maximum images exceeded"

ุจุนุฏ:
โ "ุญุฌู ูุงู (4.2MB) ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ ุงุณุช! ุญุฏุงฺฉุซุฑ 3MB"
โ "3 ุนฺฉุณ ุจุง ููููุช ุขูพููุฏ ุดุฏ! (ุจุงูโูุงูุฏู: 2 ุนฺฉุณ)"
โ "ุชุนุฏุงุฏ ุนฺฉุณโูุง ุจุด ุงุฒ ุญุฏ ูุฌุงุฒ ุงุณุช (ููุฌูุฏ: 3ุ ุงูุชุฎุงุจ: 3ุ ูุฌุงุฒ: 5)"
```

---

## ๐งช ุชุณุชโูุง ุงูุฌุงู ุดุฏู

### โ ุชุณุชโูุง ูููู
- [x] ุขูพููุฏ 1 ุนฺฉุณ 2MB โ ูููู
- [x] ุขูพููุฏ 5 ุนฺฉุณ (ูุฑ ฺฉุฏุงู 2.5MB) โ ูููู
- [x] ุขูพููุฏ ุนฺฉุณ JPG โ ูููู
- [x] ุขูพููุฏ ุนฺฉุณ PNG โ ูููู
- [x] ุขูพููุฏ ุนฺฉุณ WebP โ ูููู

### โ ุชุณุชโูุง ุฎุทุง (ุจุงุฏ ุฑุฏ ุดููุฏ)
- [x] ุขูพููุฏ ุนฺฉุณ 4MB โ ุฑุฏ ุจุง ูพุงู ูุงุฑุณ
- [x] ุขูพููุฏ 6 ุนฺฉุณ ฺฉุฌุง โ ุฑุฏ ุจุง ูุญุฏูุฏุช
- [x] ุขูพููุฏ ููุฌูุฏ: 3ุ ุฌุฏุฏ: 3 โ ุฑุฏ (ูุฌููุน 6)
- [x] ุขูพููุฏ ูุงู PDF โ ุฑุฏ ุจุง ูพุงู ููุน ูุงู
- [x] ุขูพููุฏ ูุงู MP4 โ ุฑุฏ ุจุง ูพุงู ููุน ูุงู
- [x] ุขูพููุฏ ุจุฏูู authentication โ ุฑุฏ 401

---

## ๐ ูุงูโูุง ุชุบุฑ ุงูุชู

### 1. Backend Files
```
โ๏ธ backend/file_manager.py
   - ุฎุทูุท 16-19: ูุญุฏูุฏุชโูุง
   - ุฎุทูุท 27-77: ูุชุฏ save_property_image ุจุง MIME check

โ๏ธ backend/main.py
   - ุฎุทูุท 1457-1479: ุจุฑุฑุณ ุชุนุฏุงุฏ ุจุง ูพุงู ูุงุฑุณ
   - ุฎุทูุท 1482-1528: ุขูพููุฏ ุจุง error handling ฺฉุงูู
   - ุฎุทูุท 1537-1552: response ุจุง ุฌุฒุฆุงุช ฺฉุงูู
```

### 2. Frontend Files
```
โ๏ธ frontend/src/components/PropertyImageUpload.jsx
   - ุฎุท 10: MAX_FILE_SIZE = 3MB
   - ุฎุทูุท 33-50: validateFile ุจุง ุจุฑุฑุณ ุฏูู
   - ุฎุทูุท 52-71: uploadImages ุจุง alert ูุง ูุงุฑุณ
   - ุฎุทูุท 85-110: ุจุฑุฑุณ ู ุฌูุนโุขูุฑ ุฎุทุงูุง
   - ุฎุทูุท 147-164: ููุงุด ูุชุฌู ุจุง ุฌุฒุฆุงุช
```

### 3. Documentation
```
๐ docs/IMAGE_UPLOAD_LIMITS_FA.md (ุฌุฏุฏ)
   - ุฑุงูููุง ฺฉุงูู ูุญุฏูุฏุชโูุง ุจู ูุงุฑุณ
   - ูุซุงูโูุง ุนูู
   - ุนุจโุงุจ
   - FAQ
```

---

## ๐ ูุญูู ุงุณุชูุงุฏู

### ุจุฑุง ุชูุณุนูโุฏููุฏฺฏุงู

1. **Pull ฺฉุฑุฏู ุขุฎุฑู ุชุบุฑุงุช**
```bash
git pull origin copilot/build-multi-tenant-saas-architecture
```

2. **ูุตุจ dependencies (ุงฺฏุฑ ูุงุฒ ุงุณุช)**
```bash
cd backend
pip install -r requirements.txt

cd ../frontend
npm install
```

3. **ุงุฌุฑุง backend**
```bash
cd backend
uvicorn main:app --reload --port 8000
```

4. **ุงุฌุฑุง frontend**
```bash
cd frontend
npm run dev
```

5. **ุชุณุช ูุญุฏูุฏุชโูุง**
   - ุขูพููุฏ ุนฺฉุณ 4MB โ ุจุงุฏ ุฎุทุง ุฏูุฏ
   - ุขูพููุฏ 6 ุนฺฉุณ โ ุจุงุฏ ุฎุทุง ุฏูุฏ
   - ุขูพููุฏ PDF โ ุจุงุฏ ุฎุทุง ุฏูุฏ

### ุจุฑุง ฺฉุงุฑุจุฑุงู ููุง

1. **ูุฑุงุฌุนู ุจู ูุณุชูุฏุงุช ูุงุฑุณ**
   - ุฎูุงูุฏู `docs/IMAGE_UPLOAD_LIMITS_FA.md`

2. **ุขูุงุฏูโุณุงุฒ ุนฺฉุณโูุง**
   - ุญุฌู ฺฉูุชุฑ ุงุฒ 3MB
   - ูุฑูุช JPG, PNG ุง WebP
   - ุญุฏุงฺฉุซุฑ 5 ุนฺฉุณ

3. **ุงุณุชูุงุฏู ุงุฒ ุงุจุฒุงุฑูุง ูุดุฑุฏูโุณุงุฒ**
   - TinyPNG: https://tinypng.com
   - Squoosh: https://squoosh.app

---

## ๐ ูฺฉุงุช ููู ุจุฑุง ุงุฏูู

### ูุงูุชูุฑูฺฏ
```python
# ุจุฑุฑุณ ูุงฺฏโูุง ุขูพููุฏ
grep "๐ค ุขูพููุฏ" backend/logs/app.log

# ุจุฑุฑุณ ุฎุทุงูุง ุขูพููุฏ
grep "โ ุฎุทุง ุฏุฑ ุขูพููุฏ" backend/logs/app.log

# ุจุฑุฑุณ validation errors
grep "ValueError" backend/logs/app.log
```

### ูุถุง ุฏุณฺฉ
```bash
# ุจุฑุฑุณ ูุถุง ุงุดุบุงู ุดุฏู
du -sh backend/uploads/properties/

# ุชุนุฏุงุฏ ฺฉู ุนฺฉุณโูุง
find backend/uploads/properties/ -type f | wc -l

# ูุงูฺฏู ุญุฌู ุนฺฉุณโูุง
find backend/uploads/properties/ -type f -exec du -k {} \; | awk '{sum+=$1} END {print sum/NR "KB"}'
```

### ูพุงฺฉโุณุงุฒ (ุงุฎุชุงุฑ)
```python
# ุงุฌุฑุง cleanup ุจุฑุง ูุงูโูุง ูุฏู (>30 ุฑูุฒ)
from file_manager import file_manager
deleted = file_manager.cleanup_old_files(days=30)
print(f"Deleted {deleted} orphaned files")
```

---

## โ๏ธ ูุดุฏุงุฑูุง

### โ๏ธ ุชุบุฑุงุช Breaking
```
NONE - ุงู ุชุบุฑุงุช backward compatible ูุณุชูุฏ
```

### โ๏ธ ุฏุชุงุจุณ
```
โ ูุงุฒ ุจู migration ุฌุฏุฏ ูุณุช
โ ููุฏูุง ููุฌูุฏ ฺฉุงู ุงุณุช
```

### โ๏ธ ูุงูโูุง ููุฌูุฏ
```
โ ุนฺฉุณโูุง ูุฏู ุจุฏูู ุชุบุฑ ุจุงู ูโูุงููุฏ
โ ููุท ุขูพููุฏูุง ุฌุฏุฏ ุชุญุช ููุงูู ุฌุฏุฏ ูุณุชูุฏ
```

---

## ๐ ูพุดุชุจุงู

### ุณูุงูุงุช ูู
- Email: dev@artinsmartrealty.com
- Slack: #dev-support

### ฺฏุฒุงุฑุด ุจุงฺฏ
- GitHub Issues
- ุจุง label: `bug` ู `image-upload`

### ุฏุฑุฎูุงุณุช ูฺฺฏ ุฌุฏุฏ
- GitHub Issues
- ุจุง label: `enhancement` ู `image-upload`

---

## ๐ฏ TODO / ุจูุจูุฏูุง ุขูุฏู

- [ ] **ูุดุฑุฏูโุณุงุฒ ุฎูุฏฺฉุงุฑ** - ฺฉุงูุด ุญุฌู ุนฺฉุณ ุฏุฑ ุณูุช backend
- [ ] **ุชููุฏ Thumbnail** - ุจุฑุง ููุงุด ุณุฑุนโุชุฑ
- [ ] **Image CDN** - ุงุณุชูุงุฏู ุงุฒ CloudFlare ุง CloudFront
- [ ] **Lazy Loading** - ุจุงุฑฺฏุฐุงุฑ ุชุฏุฑุฌ ุนฺฉุณโูุง
- [ ] **Progressive JPG** - ููุงุด ุชุฏุฑุฌ ฺฉูุช
- [ ] **Watermark** - ุงุถุงูู ฺฉุฑุฏู ููฺฏู ุจู ุนฺฉุณโูุง
- [ ] **Image Editing** - ฺฉุฑุงูพ ู ูุฑุงุด ุฏุฑ ุณุงุช
- [ ] **Drag to Reorder** - ุชุบุฑ ุชุฑุชุจ ุนฺฉุณโูุง
- [ ] **Bulk Upload** - ุขูพููุฏ ุฏุณุชูโุฌูุน ุงุฒ ูููุฏุฑ

---

**ุชุงุฑุฎ:** 27 ููุงูุจุฑ 2025  
**ูุณุฎู:** 2.1  
**ูุถุนุช:** โ ุชฺฉูู ุดุฏู ู ุขูุงุฏู ุชุณุช  
**ุชูุณุนูโุฏููุฏู:** GitHub Copilot + User  
**ูุณุชูุฏุงุช:** ูุงุฑุณ ๐ฎ๐ท + English

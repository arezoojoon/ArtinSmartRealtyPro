# Ù…Ø¹Ù…Ø§Ø±ÛŒ Ù¾Ù„ØªÙØ±Ù… ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡ - ArtinSmartRealty Unified

## ğŸ¯ Ù‡Ø¯Ù Ù¾Ø±ÙˆÚ˜Ù‡

Ø§Ø¯ØºØ§Ù… Ø¯Ùˆ Ø³ÛŒØ³ØªÙ…:
1. **AI Lead Scraper** - Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù„ÛŒØ¯ Ø§Ø² Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ†
2. **ArtinSmartRealty Bot** - Ú©ÙˆØ§Ù„ÛŒÙØ§ÛŒ Ù„ÛŒØ¯Ù‡Ø§ Ø§Ø² Ø·Ø±ÛŒÙ‚ ØªÙ„Ú¯Ø±Ø§Ù…/ÙˆØ§ØªØ³Ø§Ù¾

Ø¨Ù‡ ÛŒÚ© **Ù¾Ù„ØªÙØ±Ù… ÙˆØ§Ø­Ø¯ Ù‡ÙˆØ´Ù…Ù†Ø¯** Ø¨Ø§ Ù‚Ø§Ø¨Ù„ÛŒØª Follow-up Ø®ÙˆØ¯Ú©Ø§Ø±

---

## ğŸ“Š Ù…Ø¹Ù…Ø§Ø±ÛŒ Ú©Ù„ÛŒ Ø³ÛŒØ³ØªÙ…

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    UNIFIED DASHBOARD (Frontend)                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ LinkedIn     â”‚  â”‚ Bot Leads    â”‚  â”‚ Follow-up    â”‚              â”‚
â”‚  â”‚ Leads        â”‚  â”‚ (Telegram/   â”‚  â”‚ Campaigns    â”‚              â”‚
â”‚  â”‚              â”‚  â”‚  WhatsApp)   â”‚  â”‚              â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ Lead Scoring â”‚  â”‚ Property     â”‚  â”‚ Analytics    â”‚              â”‚
â”‚  â”‚ & Grading    â”‚  â”‚ Matching     â”‚  â”‚ & Reports    â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      UNIFIED BACKEND API                             â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              LEAD MANAGEMENT SYSTEM                       â”‚       â”‚
â”‚  â”‚  â€¢ Unified Lead Database (LinkedIn + Bot)                â”‚       â”‚
â”‚  â”‚  â€¢ Lead Status Pipeline (New â†’ Qualified â†’ Won/Lost)     â”‚       â”‚
â”‚  â”‚  â€¢ Lead Scoring & Grading                                â”‚       â”‚
â”‚  â”‚  â€¢ Duplicate Detection                                   â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚           INTELLIGENT FOLLOW-UP SYSTEM                    â”‚       â”‚
â”‚  â”‚  â€¢ Auto-message LinkedIn leads via Telegram/WhatsApp     â”‚       â”‚
â”‚  â”‚  â€¢ Qualify leads through conversation                    â”‚       â”‚
â”‚  â”‚  â€¢ Property matching engine                              â”‚       â”‚
â”‚  â”‚  â€¢ Re-engagement when new properties added               â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                                                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚              AI BRAIN (Google Gemini)                     â”‚       â”‚
â”‚  â”‚  â€¢ Lead qualification                                     â”‚       â”‚
â”‚  â”‚  â€¢ Personalized messaging                                â”‚       â”‚
â”‚  â”‚  â€¢ Property recommendation                               â”‚       â”‚
â”‚  â”‚  â€¢ Re-engagement triggers                                â”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LinkedIn    â”‚      â”‚  Telegram    â”‚      â”‚  WhatsApp    â”‚
â”‚  Scraper     â”‚      â”‚  Bot         â”‚      â”‚  Bot         â”‚
â”‚  (Extension) â”‚      â”‚              â”‚      â”‚              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ Ø³Ø§Ø®ØªØ§Ø± Ø¯ÛŒØªØ§Ø¨ÛŒØ³ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡

### Ø¬Ø¯ÙˆÙ„ Ø§ØµÙ„ÛŒ: `unified_leads`

```sql
CREATE TABLE unified_leads (
    -- Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ
    id SERIAL PRIMARY KEY,
    tenant_id INTEGER,  -- Ø¨Ø±Ø§ÛŒ multi-tenant
    
    -- Ø§Ø·Ù„Ø§Ø¹Ø§Øª ØªÙ…Ø§Ø³
    name VARCHAR(255) NOT NULL,
    phone VARCHAR(50),
    email VARCHAR(255),
    linkedin_url VARCHAR(500) UNIQUE,
    telegram_user_id BIGINT UNIQUE,
    whatsapp_number VARCHAR(50) UNIQUE,
    
    -- Ù…Ù†Ø¨Ø¹ Ù„ÛŒØ¯
    source VARCHAR(50), -- 'linkedin' | 'telegram' | 'whatsapp' | 'manual'
    
    -- ÙˆØ¶Ø¹ÛŒØª Ø¯Ø± Ù¾Ø§ÛŒÙ¾Ù„Ø§ÛŒÙ†
    status VARCHAR(50), -- 'new' | 'contacted' | 'qualified' | 'viewing_scheduled' | 'won' | 'lost'
    
    -- Ø§Ù…ØªÛŒØ§Ø² Ùˆ Ø¯Ø±Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ
    lead_score INTEGER DEFAULT 0,  -- 0-100
    grade VARCHAR(10),  -- 'A' | 'B' | 'C' | 'D'
    
    -- Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ (Ø§Ø² Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ†)
    job_title VARCHAR(255),
    company VARCHAR(255),
    about TEXT,
    location VARCHAR(255),
    
    -- Ù†ÛŒØ§Ø²Ù‡Ø§ Ùˆ Ø¹Ù„Ø§ÛŒÙ‚ (Ø§Ø² Ú©ÙˆØ§Ù„ÛŒÙÛŒÚ©ÛŒØ´Ù†)
    transaction_type VARCHAR(20), -- 'buy' | 'rent'
    property_type VARCHAR(50),
    budget_min DECIMAL(15,2),
    budget_max DECIMAL(15,2),
    bedrooms INTEGER,
    preferred_locations JSON,
    purpose VARCHAR(50), -- 'investment' | 'living' | 'residency'
    pain_points JSON,
    
    -- Follow-up
    last_contacted_at TIMESTAMP,
    last_message TEXT,
    next_followup_at TIMESTAMP,
    followup_count INTEGER DEFAULT 0,
    conversation_state VARCHAR(50),
    
    -- Property Matching
    matched_properties JSON,  -- Ù„ÛŒØ³Øª IDÙ‡Ø§ÛŒ Ø§Ù…Ù„Ø§Ú©ÛŒ Ú©Ù‡ Ù…Ú† Ø´Ø¯Ù†Ø¯
    viewed_properties JSON,   -- Ù„ÛŒØ³Øª IDÙ‡Ø§ÛŒ Ø§Ù…Ù„Ø§Ú©ÛŒ Ú©Ù‡ Ø¯ÛŒØ¯Ù‡ Ø´Ø¯Ù†Ø¯
    
    -- Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW(),
    
    FOREIGN KEY (tenant_id) REFERENCES tenants(id)
);

-- Index Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ø³Ø±ÛŒØ¹
CREATE INDEX idx_leads_status ON unified_leads(status);
CREATE INDEX idx_leads_score ON unified_leads(lead_score DESC);
CREATE INDEX idx_leads_source ON unified_leads(source);
CREATE INDEX idx_leads_next_followup ON unified_leads(next_followup_at);
```

### Ø¬Ø¯ÙˆÙ„ ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ¹Ø§Ù…Ù„Ø§Øª: `lead_interactions`

```sql
CREATE TABLE lead_interactions (
    id SERIAL PRIMARY KEY,
    lead_id INTEGER NOT NULL,
    
    channel VARCHAR(50), -- 'linkedin' | 'telegram' | 'whatsapp' | 'email'
    direction VARCHAR(20), -- 'inbound' | 'outbound'
    message_text TEXT,
    ai_generated BOOLEAN DEFAULT FALSE,
    
    -- Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ§Ù…â€ŒÙ‡Ø§ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø±
    campaign_id INTEGER,  -- Ø§Ú¯Ø± Ø¨Ø®Ø´ÛŒ Ø§Ø² Ú©Ù…Ù¾ÛŒÙ† follow-up Ø¨Ø§Ø´Ø¯
    
    created_at TIMESTAMP DEFAULT NOW(),
    
    FOREIGN KEY (lead_id) REFERENCES unified_leads(id)
);
```

### Ø¬Ø¯ÙˆÙ„ Ú©Ù…Ù¾ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Follow-up: `followup_campaigns`

```sql
CREATE TABLE followup_campaigns (
    id SERIAL PRIMARY KEY,
    tenant_id INTEGER NOT NULL,
    
    name VARCHAR(255),
    description TEXT,
    
    -- ØªØ±ÛŒÚ¯Ø± Ú©Ù…Ù¾ÛŒÙ†
    trigger_type VARCHAR(50), -- 'new_property' | 'scheduled' | 'manual'
    
    -- ÙÛŒÙ„ØªØ± Ù„ÛŒØ¯Ù‡Ø§
    target_status VARCHAR(50),  -- ÙÙ‚Ø· Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ø¨Ø§ Ø§ÛŒÙ† status
    min_score INTEGER,          -- Ø­Ø¯Ø§Ù‚Ù„ Ø§Ù…ØªÛŒØ§Ø²
    
    -- Ù…Ø­ØªÙˆØ§ÛŒ Ù¾ÛŒØ§Ù…
    message_template TEXT,
    
    -- Ø²Ù…Ø§Ù†â€ŒØ¨Ù†Ø¯ÛŒ
    scheduled_at TIMESTAMP,
    executed_at TIMESTAMP,
    
    -- Ø¢Ù…Ø§Ø±
    total_sent INTEGER DEFAULT 0,
    total_replied INTEGER DEFAULT 0,
    
    active BOOLEAN DEFAULT TRUE,
    created_at TIMESTAMP DEFAULT NOW(),
    
    FOREIGN KEY (tenant_id) REFERENCES tenants(id)
);
```

---

## ğŸ”„ Ø¬Ø±ÛŒØ§Ù† Ú©Ø§Ø±ÛŒ (Workflow)

### 1ï¸âƒ£ Ø¬Ù…Ø¹â€ŒØ¢ÙˆØ±ÛŒ Ù„ÛŒØ¯ Ø§Ø² Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ†

```
LinkedIn Profile
      â”‚
      â–¼
Chrome Extension Scrapes
      â”‚
      â”œâ”€â–º Name, Job Title, Company
      â”œâ”€â–º About Section
      â”œâ”€â–º Recent Posts
      â””â”€â–º Profile URL
      â”‚
      â–¼
Save to unified_leads
      â”‚
      â”œâ”€â–º source = 'linkedin'
      â”œâ”€â–º status = 'new'
      â””â”€â–º lead_score = Auto-calculate
      â”‚
      â–¼
Trigger Auto Follow-up Campaign
```

### 2ï¸âƒ£ Ú©ÙˆØ§Ù„ÛŒÙØ§ÛŒ Ù„ÛŒØ¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø±Ø¨Ø§Øª

```
User Messages Bot (Telegram/WhatsApp)
      â”‚
      â–¼
Check if exists in unified_leads
      â”‚
      â”œâ”€â–º YES: Update existing lead
      â”‚         â”œâ”€â–º Merge data
      â”‚         â”œâ”€â–º Update status
      â”‚         â””â”€â–º Increase lead_score
      â”‚
      â””â”€â–º NO:  Create new lead
                â”œâ”€â–º source = 'telegram' or 'whatsapp'
                â””â”€â–º status = 'new'
      â”‚
      â–¼
AI Conversation (Gemini)
      â”‚
      â”œâ”€â–º Extract: Budget, Property Type, Location
      â”œâ”€â–º Identify: Pain Points, Purpose
      â””â”€â–º Calculate: Lead Score
      â”‚
      â–¼
Update unified_leads
      â”‚
      â””â”€â–º status = 'qualified'
      â”‚
      â–¼
Property Matching Engine
      â”‚
      â””â”€â–º Find properties matching criteria
      â”‚
      â–¼
Send Property Recommendations
```

### 3ï¸âƒ£ Ø³ÛŒØ³ØªÙ… Follow-up Ø®ÙˆØ¯Ú©Ø§Ø±

```
Scheduler (Runs Every Hour)
      â”‚
      â–¼
Query unified_leads WHERE:
      â”‚
      â”œâ”€â–º status = 'new' OR 'contacted'
      â”œâ”€â–º next_followup_at <= NOW()
      â””â”€â–º followup_count < 5
      â”‚
      â–¼
For Each Lead:
      â”‚
      â”œâ”€â–º Generate Personalized Message (AI)
      â”‚         â”‚
      â”‚         â””â”€â–º Use: name, job_title, about, pain_points
      â”‚
      â”œâ”€â–º Send via Telegram/WhatsApp
      â”‚
      â”œâ”€â–º Log in lead_interactions
      â”‚
      â””â”€â–º Update:
                â”œâ”€â–º last_contacted_at = NOW()
                â”œâ”€â–º followup_count += 1
                â””â”€â–º next_followup_at = NOW() + 3 days
```

### 4ï¸âƒ£ Ù†ÙˆØªÛŒÙÛŒÚ©ÛŒØ´Ù† Ø§Ù…Ù„Ø§Ú© Ø¬Ø¯ÛŒØ¯

```
New Property Added to Database
      â”‚
      â–¼
Property Matching Engine
      â”‚
      â”œâ”€â–º Query unified_leads WHERE:
      â”‚         â”‚
      â”‚         â”œâ”€â–º status != 'won' AND status != 'lost'
      â”‚         â”œâ”€â–º budget_min <= property.price <= budget_max
      â”‚         â”œâ”€â–º property_type = property.type
      â”‚         â””â”€â–º preferred_locations CONTAINS property.location
      â”‚
      â””â”€â–º For Each Matched Lead:
                â”‚
                â”œâ”€â–º Generate Personalized Message
                â”‚         â”‚
                â”‚         â””â”€â–º "Ø³Ù„Ø§Ù… {name}ØŒ Ù…Ù„Ú© Ø¬Ø¯ÛŒØ¯ÛŒ Ù…Ø·Ø§Ø¨Ù‚ Ø¨Ø§ Ø³Ù„ÛŒÙ‚Ù‡ Ø´Ù…Ø§..."
                â”‚
                â”œâ”€â–º Send via Telegram/WhatsApp
                â”‚
                â””â”€â–º Update matched_properties JSON
```

---

## ğŸ¯ Ø³ÛŒØ³ØªÙ… Lead Scoring

### Ø§Ù…ØªÛŒØ§Ø²Ø¯Ù‡ÛŒ Ø®ÙˆØ¯Ú©Ø§Ø± (0-100)

```python
def calculate_lead_score(lead):
    score = 0
    
    # 1. Ú©Ø§Ù…Ù„ Ø¨ÙˆØ¯Ù† Ø§Ø·Ù„Ø§Ø¹Ø§Øª (20 Ø§Ù…ØªÛŒØ§Ø²)
    if lead.phone: score += 5
    if lead.email: score += 5
    if lead.linkedin_url: score += 5
    if lead.job_title: score += 5
    
    # 2. ØªØ¹Ø§Ù…Ù„ (30 Ø§Ù…ØªÛŒØ§Ø²)
    if lead.followup_count > 0: score += 10
    if lead.replied_to_bot: score += 20
    
    # 3. Ú©ÙˆØ§Ù„ÛŒÙÛŒÚ©ÛŒØ´Ù† (30 Ø§Ù…ØªÛŒØ§Ø²)
    if lead.budget_min and lead.budget_max: score += 10
    if lead.property_type: score += 10
    if lead.preferred_locations: score += 10
    
    # 4. Engagement (20 Ø§Ù…ØªÛŒØ§Ø²)
    if lead.viewed_properties: score += 10
    if lead.scheduled_viewing: score += 10
    
    return score

def assign_grade(score):
    if score >= 80: return 'A'  # Hot Lead
    if score >= 60: return 'B'  # Warm Lead
    if score >= 40: return 'C'  # Cold Lead
    return 'D'  # Very Cold
```

---

## ğŸ¤– Ù¾ÛŒØ§Ù…â€ŒØ±Ø³Ø§Ù†ÛŒ Ù‡ÙˆØ´Ù…Ù†Ø¯

### Ù‚Ø§Ù„Ø¨ Ù¾ÛŒØ§Ù… Ø¨Ø±Ø§ÛŒ Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ†

```python
# Ù¾ÛŒØ§Ù… Ø§ÙˆÙ„ - Ù…Ø¹Ø±ÙÛŒ
message_template = """
Ø³Ù„Ø§Ù… {name} Ø¹Ø²ÛŒØ²! ğŸ‘‹

Ø§Ø² Ø·Ø±ÛŒÙ‚ Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ† Ø¯ÛŒØ¯Ù… Ú©Ù‡ Ø¯Ø± {company} Ø¨Ù‡ Ø¹Ù†ÙˆØ§Ù† {job_title} ÙØ¹Ø§Ù„ÛŒØª Ù…ÛŒâ€ŒÚ©Ù†ÛŒØ¯.

{personalized_hook}

Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´Ù…Ù†Ø¯ {agent_name} Ù‡Ø³ØªÙ… - Ù…Ø´Ø§ÙˆØ± Ø§Ù…Ù„Ø§Ú© Ø¯Ø± Ø¯Ø¨ÛŒ.

{pain_solution}

Ø¢ÛŒØ§ ÙˆÙ‚Øª Ø¯Ø§Ø±ÛŒØ¯ Ú©Ù‡ Ø¯Ø± Ù…ÙˆØ±Ø¯ ÙØ±ØµØªâ€ŒÙ‡Ø§ÛŒ Ø³Ø±Ù…Ø§ÛŒÙ‡â€ŒÚ¯Ø°Ø§Ø±ÛŒ Ø¯Ø± Ø¯Ø¨ÛŒ ØµØ­Ø¨Øª Ú©Ù†ÛŒÙ…ØŸ
"""

# Ù¾ÛŒØ§Ù… Ø¯ÙˆÙ… - Follow-up (Ø§Ú¯Ø± Ø¬ÙˆØ§Ø¨ Ù†Ø¯Ø§Ø¯)
followup_1 = """
Ø³Ù„Ø§Ù… Ø¯ÙˆØ¨Ø§Ø±Ù‡ {name}! ğŸ™‚

Ù…ÛŒâ€ŒØ¯ÙˆÙ†Ù… Ø´Ù„ÙˆØº Ù‡Ø³ØªÛŒØ¯ØŒ Ø§Ù…Ø§ {urgency_trigger}

Ø¢ÛŒØ§ Ø¹Ù„Ø§Ù‚Ù‡â€ŒÙ…Ù†Ø¯ÛŒØ¯ {specific_offer}ØŸ
"""

# Ù¾ÛŒØ§Ù… Ø³ÙˆÙ… - Ø¢Ø®Ø±ÛŒÙ† ØªÙ„Ø§Ø´
followup_2 = """
{name} Ø¹Ø²ÛŒØ²ØŒ

Ø§ÛŒÙ† Ø¢Ø®Ø±ÛŒÙ† Ù¾ÛŒØ§Ù… Ù…Ù†Ù‡. Ø§Ú¯Ø± Ø§Ù„Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ù†ÛŒØ³ØªØŒ Ù…Ø´Ú©Ù„ÛŒ Ù†ÛŒØ³Øª!

Ø§Ù…Ø§ Ø§Ú¯Ø± Ø±ÙˆØ²ÛŒ {future_need}ØŒ Ø­ØªÙ…Ø§ Ø¨Ù‡Ù… Ù¾ÛŒØ§Ù… Ø¨Ø¯Ù‡ ğŸ˜Š
"""
```

---

## ğŸ“ˆ Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ ÛŒÚ©Ù¾Ø§Ø±Ú†Ù‡

### KPIs Ø§ØµÙ„ÛŒ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“Š LEAD OVERVIEW                                        â”‚
â”‚                                                          â”‚
â”‚  Total Leads: 1,250                                      â”‚
â”‚  â”œâ”€ LinkedIn: 800  (64%)                                â”‚
â”‚  â”œâ”€ Telegram: 350  (28%)                                â”‚
â”‚  â””â”€ WhatsApp: 100  (8%)                                 â”‚
â”‚                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚  â”‚ New      â”‚  â”‚ Qualifiedâ”‚  â”‚ Won      â”‚              â”‚
â”‚  â”‚ 450      â”‚  â”‚ 320      â”‚  â”‚ 45       â”‚              â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                          â”‚
â”‚  Lead Grading:                                           â”‚
â”‚  ğŸ”¥ A-Grade: 120 leads  (Hot)                           â”‚
â”‚  ğŸŒ¡ï¸  B-Grade: 380 leads  (Warm)                          â”‚
â”‚  â„ï¸  C-Grade: 520 leads  (Cold)                          â”‚
â”‚  ğŸ§Š D-Grade: 230 leads  (Very Cold)                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¤– FOLLOW-UP AUTOMATION                                 â”‚
â”‚                                                          â”‚
â”‚  Active Campaigns: 3                                     â”‚
â”‚                                                          â”‚
â”‚  Campaign 1: "LinkedIn Lead Warmup"                      â”‚
â”‚  â”œâ”€ Target: LinkedIn leads, Score < 40                  â”‚
â”‚  â”œâ”€ Sent: 245 messages                                  â”‚
â”‚  â””â”€ Replied: 67 (27% response rate)                     â”‚
â”‚                                                          â”‚
â”‚  Campaign 2: "New Property Alert"                        â”‚
â”‚  â”œâ”€ Trigger: New property added                         â”‚
â”‚  â”œâ”€ Matched: 89 leads                                   â”‚
â”‚  â””â”€ Sent: 89 messages                                   â”‚
â”‚                                                          â”‚
â”‚  Next Scheduled Follow-ups:                              â”‚
â”‚  â”œâ”€ Today: 34 leads                                     â”‚
â”‚  â”œâ”€ This Week: 128 leads                                â”‚
â”‚  â””â”€ This Month: 456 leads                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ  PROPERTY MATCHING                                    â”‚
â”‚                                                          â”‚
â”‚  Total Properties: 450                                   â”‚
â”‚                                                          â”‚
â”‚  Property #203: Luxury Villa, Palm Jumeirah              â”‚
â”‚  â”œâ”€ Price: $2.5M                                        â”‚
â”‚  â”œâ”€ Matched Leads: 12                                   â”‚
â”‚  â”œâ”€ Viewed: 5                                           â”‚
â”‚  â””â”€ Scheduled Viewings: 2                               â”‚
â”‚                                                          â”‚
â”‚  Top Matched Properties:                                 â”‚
â”‚  1. Villa, Palm Jumeirah - 12 matches                   â”‚
â”‚  2. Apartment, Dubai Marina - 18 matches                â”‚
â”‚  3. Penthouse, Downtown - 8 matches                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú¯Ø§Ù… Ø¨Ù‡ Ú¯Ø§Ù…

### ÙØ§Ø² 1: Ø§Ø¯ØºØ§Ù… Ø¯ÛŒØªØ§Ø¨ÛŒØ³ (1-2 Ø±ÙˆØ²)

1. âœ… Ø§ÛŒØ¬Ø§Ø¯ Ø¬Ø¯ÙˆÙ„ `unified_leads`
2. âœ… Migrate Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ LinkedIn Scraper
3. âœ… Migrate Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ ArtinSmartRealty Bot
4. âœ… Ø§ÛŒØ¬Ø§Ø¯ Duplicate Detection Logic

### ÙØ§Ø² 2: Ø³ÛŒØ³ØªÙ… Follow-up (2-3 Ø±ÙˆØ²)

1. âœ… Ø§ÛŒØ¬Ø§Ø¯ `followup_campaigns` table
2. âœ… Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Scheduler (Celery or APScheduler)
3. âœ… Ø§ÛŒØ¬Ø§Ø¯ AI Message Generator
4. âœ… Ø§ØªØµØ§Ù„ Ø¨Ù‡ Telegram/WhatsApp

### ÙØ§Ø² 3: Property Matching Engine (2-3 Ø±ÙˆØ²)

1. âœ… Ø§Ù„Ú¯ÙˆØ±ÛŒØªÙ… Matching (budget, type, location)
2. âœ… Auto-notify Ù„ÛŒØ¯Ù‡Ø§ Ø¨Ø§ Ø§Ù…Ù„Ø§Ú© Ø¬Ø¯ÛŒØ¯
3. âœ… Track viewed properties
4. âœ… Smart Re-engagement

### ÙØ§Ø² 4: Lead Scoring System (1-2 Ø±ÙˆØ²)

1. âœ… Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Auto-scoring
2. âœ… Grade Assignment (A/B/C/D)
3. âœ… Re-calculate on every interaction

### ÙØ§Ø² 5: Unified Dashboard (3-4 Ø±ÙˆØ²)

1. âœ… Ø§Ø¯ØºØ§Ù… UI Ø¯Ùˆ Ø³ÛŒØ³ØªÙ…
2. âœ… Lead Pipeline View (Kanban)
3. âœ… Campaign Management UI
4. âœ… Analytics & Reports

---

## ğŸš€ Ù†Ú©Ø§Øª Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

### 1. Duplicate Detection

```python
async def find_or_create_lead(data):
    # Ø§ÙˆÙ„ Ú†Ú© Ú©Ù† Ø¨Ø§ Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ†
    if data.get('linkedin_url'):
        lead = await db.query(UnifiedLead).filter(
            linkedin_url=data['linkedin_url']
        ).first()
        if lead:
            return lead, False  # Found, not created
    
    # Ø§Ú¯Ø± Ù†Ø¨ÙˆØ¯ØŒ Ú†Ú© Ú©Ù† Ø¨Ø§ ØªÙ„Ú¯Ø±Ø§Ù…
    if data.get('telegram_user_id'):
        lead = await db.query(UnifiedLead).filter(
            telegram_user_id=data['telegram_user_id']
        ).first()
        if lead:
            return lead, False
    
    # Ø§Ú¯Ø± Ù†Ø¨ÙˆØ¯ØŒ Ú†Ú© Ú©Ù† Ø¨Ø§ Ø´Ù…Ø§Ø±Ù‡
    if data.get('phone'):
        lead = await db.query(UnifiedLead).filter(
            phone=data['phone']
        ).first()
        if lead:
            return lead, False
    
    # Ø§Ú¯Ø± Ù‡ÛŒÚ†Ú©Ø¯Ø§Ù… Ù†Ø¨ÙˆØ¯ØŒ Ø¨Ø³Ø§Ø²
    lead = UnifiedLead(**data)
    await db.add(lead)
    await db.commit()
    return lead, True  # Created
```

### 2. Smart Follow-up Scheduler

```python
from apscheduler.schedulers.asyncio import AsyncIOScheduler

scheduler = AsyncIOScheduler()

@scheduler.scheduled_job('interval', hours=1)
async def run_followup_campaigns():
    # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù„ÛŒØ¯Ù‡Ø§ÛŒÛŒ Ú©Ù‡ Ù†ÛŒØ§Ø² Ø¨Ù‡ follow-up Ø¯Ø§Ø±Ù†Ø¯
    leads = await db.query(UnifiedLead).filter(
        UnifiedLead.next_followup_at <= datetime.now(),
        UnifiedLead.status.in_(['new', 'contacted']),
        UnifiedLead.followup_count < 5
    ).all()
    
    for lead in leads:
        # ØªÙˆÙ„ÛŒØ¯ Ù¾ÛŒØ§Ù… Ø´Ø®ØµÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø´Ø¯Ù‡
        message = await generate_personalized_message(lead)
        
        # Ø§Ø±Ø³Ø§Ù„
        if lead.telegram_user_id:
            await send_telegram_message(lead.telegram_user_id, message)
        elif lead.whatsapp_number:
            await send_whatsapp_message(lead.whatsapp_number, message)
        
        # Ø¢Ù¾Ø¯ÛŒØª Ù„ÛŒØ¯
        lead.last_contacted_at = datetime.now()
        lead.followup_count += 1
        lead.next_followup_at = datetime.now() + timedelta(days=3)
        await db.commit()
```

### 3. Property Matching on New Property

```python
async def on_property_added(property_id):
    property = await db.query(Property).filter(id=property_id).first()
    
    # Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…Ú†
    matched_leads = await db.query(UnifiedLead).filter(
        UnifiedLead.status.not_in(['won', 'lost']),
        UnifiedLead.budget_min <= property.price,
        UnifiedLead.budget_max >= property.price,
        UnifiedLead.property_type == property.type
    ).all()
    
    for lead in matched_leads:
        # Ø§Ú¯Ø± Ù„ÙˆÚ©ÛŒØ´Ù† Ù‡Ù… Ù…Ú† Ø¨Ø§Ø´Ø¯
        if property.location in lead.preferred_locations:
            message = f"""
            ğŸ  Ù…Ù„Ú© Ø¬Ø¯ÛŒØ¯ Ù…Ø·Ø§Ø¨Ù‚ Ø³Ù„ÛŒÙ‚Ù‡ Ø´Ù…Ø§!
            
            Ø³Ù„Ø§Ù… {lead.name}ØŒ
            
            Ù…Ù„Ú© Ø¬Ø¯ÛŒØ¯ÛŒ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ Ú©Ù‡ Ø¯Ù‚ÛŒÙ‚Ø§ Ø¨Ø§ Ù†ÛŒØ§Ø²Ù‡Ø§ÛŒ Ø´Ù…Ø§ Ù…Ú† Ù…ÛŒâ€ŒÚ©Ù†Ù‡:
            
            ğŸ“ {property.location}
            ğŸ’° ${property.price:,.0f}
            ğŸ›ï¸ {property.bedrooms} Ø®ÙˆØ§Ø¨Ù‡
            
            Ø¢ÛŒØ§ Ù…ÛŒØ®ÙˆØ§ÛŒ Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ± Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØŸ
            """
            
            await send_message_to_lead(lead, message)
            
            # Ø¢Ù¾Ø¯ÛŒØª matched_properties
            if not lead.matched_properties:
                lead.matched_properties = []
            lead.matched_properties.append(property_id)
            await db.commit()
```

---

## âœ… Ù†ØªÛŒØ¬Ù‡ Ù†Ù‡Ø§ÛŒÛŒ

Ø¨Ø§ Ø§ÛŒÙ† Ù…Ø¹Ù…Ø§Ø±ÛŒ:

âœ… **ÛŒÚ© Ù¾Ù„ØªÙØ±Ù… ÙˆØ§Ø­Ø¯** - Ù‡Ù…Ù‡ Ù„ÛŒØ¯Ù‡Ø§ Ø¯Ø± ÛŒÚ© Ø¬Ø§  
âœ… **Follow-up Ø®ÙˆØ¯Ú©Ø§Ø±** - Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù„ÛŒÙ†Ú©Ø¯ÛŒÙ† Ø¨Ù‡ ØµÙˆØ±Øª Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ù¾ÛŒÚ¯ÛŒØ±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯  
âœ… **Ú©ÙˆØ§Ù„ÛŒÙÛŒÚ©ÛŒØ´Ù† Ù‡ÙˆØ´Ù…Ù†Ø¯** - AI Ù„ÛŒØ¯Ù‡Ø§ Ø±Ø§ Ø¯Ø±Ø¬Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯  
âœ… **Property Matching** - Ù„ÛŒØ¯Ù‡Ø§ Ø§ØªÙˆÙ…Ø§ØªÛŒÚ© Ø§Ù…Ù„Ø§Ú© Ù…Ù†Ø§Ø³Ø¨ Ø¯Ø±ÛŒØ§ÙØª Ù…ÛŒâ€ŒÚ©Ù†Ù†Ø¯  
âœ… **Re-engagement** - ÙˆÙ‚ØªÛŒ Ù…Ù„Ú© Ø¬Ø¯ÛŒØ¯ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯ØŒ Ù„ÛŒØ¯Ù‡Ø§ÛŒ Ù…Ø±ØªØ¨Ø· Ù†ÙˆØªÛŒÙ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯  
âœ… **Analytics** - Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯ Ø¬Ø§Ù…Ø¹ Ø¨Ø§ Ú¯Ø²Ø§Ø±Ø´â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ù…Ù„  

---

**Ø²Ù…Ø§Ù† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ ØªØ®Ù…ÛŒÙ†ÛŒ**: 10-12 Ø±ÙˆØ² Ú©Ø§Ø±ÛŒ
